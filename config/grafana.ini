# Grafana Configuration for CIRISLens Production
# This file configures Grafana for public dashboard access

[server]
protocol = http
http_port = 3000
root_url = https://agents.ciris.ai/lens
serve_from_sub_path = false

[auth]
# Disable login form, only OAuth if explicitly accessing admin
disable_login_form = false
disable_signout_menu = true

[auth.anonymous]
# Enable anonymous access - CRITICAL for public dashboards
enabled = true
org_name = Public
org_id = 2
org_role = Viewer
hide_version = true

[auth.basic]
enabled = false

[security]
# Admin user configuration
# These values are only used on first run or when database is reset
# To change password after deployment, use: ./scripts/reset-grafana-password.sh
admin_user = admin
admin_password = admin
disable_initial_admin_creation = false
disable_gravatar = true
allow_embedding = true

# Security headers
cookie_secure = true
cookie_samesite = lax
strict_transport_security = true
x_content_type_options = true
x_xss_protection = true

[users]
# Viewers can only view dashboards, not edit
viewers_can_edit = false
editors_can_admin = false

# Default UI settings for public users
default_theme = light
default_org_id = 2

[dashboards]
# Default home dashboard
default_home_dashboard_path = /var/lib/grafana/dashboards/overview.json

[analytics]
reporting_enabled = false
check_for_updates = false

[explore]
# Disable explore for public users
enabled = false

[alerting]
# Disable alerting UI for public
enabled = false

[unified_alerting]
enabled = false

[feature_toggles]
# Enable public dashboards feature
publicDashboards = true

[public_dashboards]
enabled = true