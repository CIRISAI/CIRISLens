# CIRISLens Environment Configuration
# Copy to .env and customize for your deployment

# ============================================
# Grafana Configuration
# ============================================

# Admin credentials (change in production!)
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin

# Server configuration
GF_SERVER_DOMAIN=localhost
GF_SERVER_ROOT_URL=http://localhost:3000
GF_SERVER_SERVE_FROM_SUB_PATH=false

# Anonymous access (for public dashboards)
GF_AUTH_ANONYMOUS_ENABLED=true
GF_AUTH_ANONYMOUS_ORG_ROLE=Viewer
GF_AUTH_ANONYMOUS_ORG_NAME=Public

# Google OAuth (optional, for production)
GF_AUTH_GOOGLE_ENABLED=false
GF_AUTH_GOOGLE_CLIENT_ID=
GF_AUTH_GOOGLE_CLIENT_SECRET=
GF_AUTH_GOOGLE_ALLOWED_DOMAINS=

# Features
GF_FEATURE_TOGGLES_ENABLE=traceToMetrics,traceToLogs,correlations
GF_ANALYTICS_REPORTING_ENABLED=false

# ============================================
# MinIO Configuration (Object Storage)
# ============================================

MINIO_ROOT_USER=admin
MINIO_ROOT_PASSWORD=adminpassword123
MINIO_BROWSER=on
MINIO_PROMETHEUS_AUTH_TYPE=public

# ============================================
# Storage Retention Settings
# ============================================

# How long to keep data (in days)
MIMIR_RETENTION_DAYS=30
TEMPO_RETENTION_DAYS=14
LOKI_RETENTION_DAYS=7

# ============================================
# OpenTelemetry Collector
# ============================================

# Sampling rates (0.0 to 1.0)
OTEL_SAMPLING_RATE_DEFAULT=0.1
OTEL_SAMPLING_RATE_ERRORS=1.0
OTEL_SAMPLING_RATE_SLOW=1.0

# Resource limits
OTEL_MEMORY_LIMIT_MIB=512
OTEL_MEMORY_SPIKE_MIB=128

# ============================================
# Network Configuration
# ============================================

# External endpoints (for agent connections)
OTLP_GRPC_ENDPOINT=0.0.0.0:4317
OTLP_HTTP_ENDPOINT=0.0.0.0:4318

# Internal service ports (usually don't need to change)
GRAFANA_PORT=3000
PROMETHEUS_PORT=9090
TEMPO_PORT=3200
LOKI_PORT=3100
MIMIR_PORT=9009
MINIO_API_PORT=9000
MINIO_CONSOLE_PORT=9001

# ============================================
# Resource Limits (Docker)
# ============================================

# Memory limits for each service
GRAFANA_MEMORY_LIMIT=1G
MIMIR_MEMORY_LIMIT=2G
TEMPO_MEMORY_LIMIT=1G
LOKI_MEMORY_LIMIT=1G
OTEL_COLLECTOR_MEMORY_LIMIT=512M
PROMETHEUS_MEMORY_LIMIT=1G

# ============================================
# Data Directories (for Docker volumes)
# ============================================

DATA_DIR=/var/lib/cirislens
GRAFANA_DATA_DIR=${DATA_DIR}/grafana
MIMIR_DATA_DIR=${DATA_DIR}/mimir
TEMPO_DATA_DIR=${DATA_DIR}/tempo
LOKI_DATA_DIR=${DATA_DIR}/loki
MINIO_DATA_DIR=${DATA_DIR}/minio

# ============================================
# Logging Configuration
# ============================================

# Log levels: debug, info, warn, error
LOG_LEVEL=info
GRAFANA_LOG_LEVEL=info
OTEL_LOG_LEVEL=info

# ============================================
# CIRIS-Specific Settings
# ============================================

# Taxonomy processing
ENABLE_TAXONOMY_ENRICHMENT=true
ENABLE_PII_SANITIZATION=true

# Agent discovery
DOCKER_SOCKET=/var/run/docker.sock
AGENT_DISCOVERY_INTERVAL=60

# Public dashboard settings
PUBLIC_DASHBOARD_ENABLED=true
PUBLIC_DASHBOARD_ORG_ID=2

# ============================================
# Production Settings (uncomment for production)
# ============================================

# TLS/SSL
# TLS_ENABLED=true
# TLS_CERT_FILE=/etc/ssl/certs/cirislens.crt
# TLS_KEY_FILE=/etc/ssl/private/cirislens.key

# External storage (S3/MinIO)
# S3_ENABLED=true
# S3_ENDPOINT=s3.amazonaws.com
# S3_ACCESS_KEY=
# S3_SECRET_KEY=
# S3_BUCKET_METRICS=ciris-metrics
# S3_BUCKET_TRACES=ciris-traces
# S3_BUCKET_LOGS=ciris-logs

# Alerting
# ALERTING_ENABLED=true
# ALERTMANAGER_URL=http://alertmanager:9093
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=
# SMTP_PASSWORD=
# ALERT_EMAIL_TO=ops@ciris.ai